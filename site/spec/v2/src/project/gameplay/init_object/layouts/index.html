<html>
<head>
<meta charset="utf-8"/>
<title>layouts и widgets</title>
<link rel="stylesheet" type="text/css" href="style/style.css">
</head>
<body>
<a href="../index.html" style="font-size=2em;color:#f60;border:1px solid #f60;border-radius:5px;">НАВЕРХ</a>
<h1>layouts и widgets</h1>
<p>
В зависимости от размеров экрана или от платформы (предполагается, что помимо сайтов, фреймворк также используется для создания графических интерфейсов программ) элементы страницы располагаются тем или иным образом. Взаимное расположение элементов задаёт объект, который мы называем лэйаутом. Для разных платформ и разных размеров экрана (окна) могут применяться разные лэйауты. Объект, передаваемый параметром в <ww>Traliva.init()</ww> должен содержать свойства <ww>target</ww>(строковый идентификатор платформы - например, для сайта это может быть 'web', а для приложения под Android - 'android'), <ww>get_layout</ww>(функция, параметры - ширина w, высота h, идентификатор платформы target; возвращает идентификатор лэйаута) и <ww>layouts</ww> (объект, используемый как Map, в котором строковому идентификатору лэйаута ставится в соответствие лэйаут). Формат описания лэйаута <a href="layout_format/index.html">следующий</a>. При изменении размеров области отображения (ресайз окна на десктопе или поворот экрана на мобиле), лэйауты должны сменять друг друга согласно <ww>get_layout</ww>.
</p>
<c>
Traliva.init({
    ...
    target: 'web',
    get_layout: function(w,h,target){
        ...
        return 'id лэйаута';
    },
    layouts: {
        'id лэйаута': {
            ... лэйаут
        }
    },
    ...
});
</c>
В описании лэйаута могут упоминаться пользовательские виджеты (<a href="../../../../xxx_kit/index.html">здесь</a> они определяются, реализуются и тестируются ; наследуются от класса <a href="../../../traliva_internals/init/index.html">Traliva.WidgetStateSubscriber</a>) - в лэйауте указывается их строковый идентификатор (вы сами его задаёте), по которому функция <ww>Traliva.init()</ww> будет искать в свойстве <ww>widgets</ww> передаваемого параметром объекта. Свойство <ww>widgets</ww> представляет собой объект, в котором идентификаторам виджетов ставится в соответствие объект, описывающий виджет. Объект, опиывающий виджет, имеет следующие свойства:
<ul>
<li>constructor <span style="color:#666;">- конструктор виджета</span></li>
<li>options <span style="color:#666;">- необяз; объект параметров, который будет передан конструктору виджета (например, заголовок, цвета, режим здесь могут быть указаны)</span></li>
<li>substate <span style="color:#666;">- необяз; подсостояние</span></li>
</ul>
Если опций нет и подсостояние не используется, может использоваться сокращённая форма: вместо объекта, описывающего виджет, использовать конструктор виджета.

<c>
Traliva.init({
    ...
    widgets: {
        'id виджета': {<!--[MyWidget, 'mySubstate/helloText'],-->
            constructor: MyWidget,
            options: {id:'catalogue', title:'Каталог', valueVarName:'mode'},
            substate: 'mySubstate/modeObject'
        },
        'id другого виджета': MyWidget2
    },
    ...
});
</c>
</body>
</html>
